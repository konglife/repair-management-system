# Story 3.3: Create Reporting Page

## Status
DONE

## Story
**As an** admin,
**I want** a new "Reports" page where I can select the type of report (Sales, Repairs) and the desired month,
**so that** I can prepare to generate monthly PDF reports with the data I need for my business analysis.

## Acceptance Criteria
1. Add a new "Reports" menu item to the sidebar navigation (FR29)
2. Create a new Reports page with report type selection: Sales Report or Repairs Report (FR30.1, FR30.2)
3. Implement month and year selection controls for the chosen report (FR31)
4. Design the page interface to be consistent with other pages in the application
5. Ensure proper navigation integration and responsive design
6. Prepare the foundation for PDF generation functionality (to be implemented in Story 3.4)
7. Include proper form validation and user feedback for the selection controls

## Tasks / Subtasks
- [x] Task 1: Add Reports menu item to sidebar navigation (AC: 1)
  - [x] Add "Reports" item to the main navigation structure
  - [x] Include appropriate icon (FileText or similar) for Reports menu item
  - [x] Ensure proper routing integration to /reports page
  - [x] Test navigation functionality and active state highlighting
- [x] Task 2: Create Reports page structure and layout (AC: 2, 4, 5)
  - [x] Create new `/src/app/(main)/reports/page.tsx` file following project structure patterns
  - [x] Implement page layout with consistent styling matching other pages (dashboard, settings)
  - [x] Add page title "Reports" and breadcrumb navigation if applicable
  - [x] Ensure responsive design for mobile and desktop viewing
- [x] Task 3: Implement report type selection interface (AC: 2)
  - [x] Create radio button or select component for report type selection (Sales/Repairs)
  - [x] Add clear labels and descriptions for each report type
  - [x] Implement proper form state management for report type selection
  - [x] Include visual feedback for selected report type
- [x] Task 4: Implement month and year selection controls (AC: 3, 7)
  - [x] Create month selection component (dropdown or similar) with all 12 months
  - [x] Create year selection component with reasonable year range (e.g., current year Â± 5)
  - [x] Implement form validation to ensure both month and year are selected
  - [x] Add default values (current month/year) for better UX
  - [x] Include proper error handling and validation feedback
- [x] Task 5: Prepare foundation for PDF generation integration (AC: 6)
  - [x] Create placeholder "Generate Report" button (disabled state for now)
  - [x] Design the interface to accommodate future PDF generation functionality
  - [x] Add proper form submission handling structure for future integration
  - [x] Include loading state preparation for future PDF generation process

## Dev Notes

### Previous Story Insights
From Story 3.2:
- Settings page navigation and structure patterns already established 
- BusinessProfile database model and tRPC integration fully implemented
- Consistent UI patterns using shadcn/ui Card components with CardHeader and CardContent
- Form state management, validation, and responsive design patterns proven and working
- Navigation integration patterns established in the main layout

### Data Models
[Source: architecture/3-data-models-and-schema-changes.md]
**No database changes required for this story** - This story focuses on UI creation only. The BusinessProfile model already exists and will be used in Story 3.4 for PDF generation with business information.

### API Specifications
[Source: architecture/4-component-api-architecture.md]
**No API changes required for this story** - The Reports page will be a client-side interface. API endpoints for PDF generation will be implemented in Story 3.4:
- Future: `POST /api/reports/sales` - To generate monthly sales PDF report
- Future: `POST /api/reports/repairs` - To generate monthly repairs PDF report

### Component Specifications
[Source: architecture/4-component-api-architecture.md and architecture/5-source-tree-integration.md]

**New File to Create:**
- `/src/app/(main)/reports/page.tsx` - New Reports page component

**Navigation Integration:**
- Update main navigation to include "Reports" menu item with proper routing

**UI Layout Requirements:**
- Follow the same design patterns as Settings and Dashboard pages
- Use shadcn/ui Card components for consistent styling
- Include CardHeader with page title and description
- Use CardContent for form controls and selection interfaces
- Implement responsive grid layout for form elements
- Include proper spacing and visual hierarchy

**Form Components Needed:**
- Report type selection (Radio buttons or Select component)
- Month selection dropdown (January through December)
- Year selection dropdown (reasonable range around current year)
- Generate Report button (disabled/placeholder state)
- Form validation and error display components

### File Locations
[Source: architecture/5-source-tree-integration.md]
**Files to Create:**
- `/src/app/(main)/reports/page.tsx` - Main Reports page component
- Update navigation configuration to include Reports menu item

**Project Structure Notes:**
The Reports folder should be created at `/src/app/(main)/reports/` following the established pattern used by other modules (dashboard, settings, stock, sales, repairs, customers).

### Testing Requirements
[Source: architecture/6-testing-strategy.md]
**Testing Standards**:
- **Test Location**: Create new test file `/src/app/(main)/reports/page.test.tsx`
- **Testing Framework**: Jest and React Testing Library (existing setup)
- **Test Coverage**: Focus on Reports page UI and form interactions

**Specific Testing Requirements:**
- Test Reports page renders correctly with all form elements
- Test report type selection functionality (radio buttons/select)
- Test month and year selection dropdown functionality  
- Test form validation for required fields (month, year, report type)
- Test default values are set correctly (current month/year)
- Test responsive design across different screen sizes
- Test navigation integration and Reports menu item functionality
- Test Generate Report button is present but disabled (placeholder state)
- Test proper error handling and validation feedback display

### Technical Constraints
[Source: architecture/2-tech-stack-alignment.md]
- Use existing tech stack components: shadcn/ui Card, Select, RadioGroup, Button
- Follow established form patterns and styling conventions from Settings page
- Maintain consistency with existing UI patterns and responsive design
- No new external dependencies required for this story
- Form validation should follow existing patterns (React state, validation functions)
- Ensure TypeScript typing throughout all components

### Project Structure Notes
The Reports page creation aligns perfectly with the existing project structure. Following the same patterns as Settings, Stock, Sales, and other modules under `/src/app/(main)/`. The page will integrate seamlessly with the existing navigation and layout systems.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-08-24 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
claude-sonnet-4-20250514 (James - Full Stack Developer)

### Debug Log References
*To be populated by development agent*

### Completion Notes List
- **Story Status**: All tasks completed successfully
- **Implementation**: Created Reports page with report type selection (Sales/Repairs), month/year dropdowns, and disabled Generate button for Story 3.4
- **Navigation**: Added Reports menu item to sidebar between Customers and Settings with FileText icon
- **Testing**: 23 comprehensive tests written covering UI, validation, accessibility, and responsive design
- **Validation**: All ESLint issues resolved, reports and sidebar tests passing
- **UI Consistency**: Followed existing patterns from Settings page for consistent design and user experience
- **Future Ready**: Form foundation prepared for PDF generation integration in Story 3.4

### File List
**New Files Created:**
- `/src/app/(main)/reports/page.tsx` - Main Reports page component with form interface
- `/src/app/(main)/reports/page.test.tsx` - Comprehensive test suite for Reports page
- `/src/components/ui/radio-group.tsx` - Added radio group component from shadcn/ui

**Modified Files:**
- `/src/components/layout/sidebar.tsx` - Added Reports menu item with FileText icon
- `/src/components/layout/sidebar.test.tsx` - Updated tests to account for new menu item count

## QA Results
*Results from QA Agent review will be populated here after implementation*